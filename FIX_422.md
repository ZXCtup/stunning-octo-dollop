# Решение ошибки 422 Unprocessable Entity

### Проблема
При попытке создать пользователя возникала ошибка:
```
422 Client Error: Unprocessable Entity
```

### Причина
API ожидает, что `traffic_limit` будет отправлен как число GB (гигабайт), а не как большое число в байтах.

### Решение

**В файле `main.py` изменено:**
```python
# ❌ Было неправильно:
traffic_limit=details['traffic_gb'] * 1024 * 1024 * 1024 if details['traffic_gb'] else 0,

# ✅ Теперь правильно:
traffic_limit=traffic_limit_gb,  # Send GB directly
```

## Как использовать скрипт тестирования

Запустите тест для проверки подключения:

```bash
python test_api.py
```

Этот скрипт:
1. Проверит соединение с сервером
2. Попытается создать тестового пользователя
3. Получит ключ подписки
4. Выведет детальную информацию о каждом этапе

## Результат

Теперь бот должен успешно создавать пользователей и выдавать подписки без ошибки 422.

Если ошибка все еще появляется, проверьте:
1. Правильность URL панели в `.env` файле
2. Правильность username и password для доступа к API
3. Логи в консоли для деталей ошибки
