# Blitz VPN Telegram Bot

Этот бот предназначен для автоматической выдачи ключей VPN с использованием API Blitz VPN панели.

## Установка

1. Клонируйте репозиторий или скачайте файлы.

2. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```

3. Создайте файл `.env` в корневой папке проекта (копируйте из `.env example`):
   ```
   TELEGRAM_BOT_TOKEN=your_bot_token
   BLITZ_API_BASE_URL=https://your_panel_url
   BLITZ_API_USERNAME=admin
   BLITZ_API_PASSWORD=password
   ```

   **Важно:** URL должен быть БЕЗ trailing slash и БЕЗ `/api/v1`
   
   Пример правильного URL:
   ```
   BLITZ_API_BASE_URL=https://your.domain.com:<your panel port>/SOmelEttERSAndnumBERS
   ```

4. Обновите `ADMIN_IDS` в `config.py` с ID вашего Telegram аккаунта (для админ панели).

5. Запустите бота:
   ```
   python main.py
   ```

## Получение токена бота Telegram

1. Напишите @BotFather в Telegram
2. Выполните команду `/newbot`
3. Следуйте инструкциям и скопируйте полученный токен в `.env`

## Структура проекта

- `main.py`: Основной файл бота с обработчиками команд и кнопок.
- `database.py`: Модуль для работы с базой данных SQLite.
- `api_client.py`: Клиент для взаимодействия с API Blitz VPN.
- `config.py`: Конфигурационный файл с настройками.
- `.env`: Файл с переменными окружения (НЕ коммитить в git!)
- `requirements.txt`: Список зависимостей.

## Функционал

- `/start`: Показывает меню с кнопками: Профиль, Реферальная ссылка, Купить подписку, Помощь. Админам также показывается "Админ панель".
- **Профиль**: Отображает информацию о пользователе.
- **Реферальная ссылка**: Генерирует и показывает реферальную ссылку.
- **Купить подписку**: Показывает доступные планы и позволяет купить.
  - **Эконом**: 100GB трафика, без лимита устройств, 30 дней - 5$.
  - **Базовый**: без лимита трафика, 1 устройство, 30 дней - 10$.
  - **Premium**: без лимита трафика и устройств, 30 дней - 30$.
- **Помощь**: Информация о боте.
- **Админ панель**: Только для админов, показывает статистику сервера и пользователей.

## База данных

Бот использует SQLite для хранения данных пользователей, включая статус подписки и реферальные коды.

## API Blitz VPN

Бот интегрируется с API Blitz VPN для создания пользователей и получения ключей. Убедитесь, что:
- API доступно и работает
- Credentials (username/password) корректны
- Панель использует HTTPS (если нужен HTTPS)

**Примечание:** Бот выдает пользователям только IPv4 ключи для подключения к VPN.

## Отладка

Включено логирование всех запросов к API. При возникновении ошибок проверьте:
1. Правильность URL панели (без `/api/v1` в конце)
2. Правильность username и password
3. Доступность панели
4. Логи в консоли для деталей ошибок

## Безопасность

- **Никогда** не коммитьте `.env` файл в git!
- Используйте переменные окружения для чувствительных данных.
- Храните токены в безопасности.

## Поддержка

Если возникнут вопросы, обратитесь к документации Blitz VPN.
